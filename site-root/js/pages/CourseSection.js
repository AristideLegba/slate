Ext.define("Site.page.CourseSection",{singleton:true,constructor:function(){if(window.CourseSectionData){Ext.onReady(this.onDocReady,this)}},onDocReady:function(){Ext.getBody().on("click",function(b,a){b.stopEvent();Ext.Ajax.request({method:"GET",url:"/sections/"+window.CourseSectionData.Handle+"/roster",params:{include:"PrimaryEmail"},headers:{Accept:"application/json"},success:function(c){var d=Ext.decode(c.responseText);window.prompt("Select and copy student emails",Ext.Array.map(Ext.Array.filter(d.data,function(e){return e.PrimaryEmail}),function(e){return'"'+e.FirstName+" "+e.LastName+'" <'+e.PrimaryEmail.Data+">"}).join(", "))}})},null,{delegate:'a[href^="#copy-section-emails"]'})}});